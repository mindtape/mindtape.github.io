<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<link rel="stylesheet" type="text/css" href="media/css/main.css">
	<script src="https://kit.fontawesome.com/a924e0ea30.js" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" />
	<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
	<script src="js/leaflet-tilelayer-colorfilter.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
	<div id="map" class="map">
		
	</div>
	<div class="navbar">
		Выйти в онлайн
		<div class="switch">
			<div class="circle"></div>
		</div>
	</div>
	<div class="bottom-navbar">
		<div class="bottom-navbar-item active">
			<i class="far fa-map"></i>
		</div>
		<div class="bottom-navbar-item">
			<i class="fas fa-th-list"></i>
		</div>
	</div>
	<div class="order-notification">
		<b>Новый заказ</b>
		<p>Тест тест тест</p> <br>
		<a href="javascript:void(0);" class="decline-button fw" onclick="closeNotification();">Отмена</a>
		<a href="tel:77475598018" class="decline-button fw">Звонок клиенту</a>
		<a href="" class="accept-button fw">Принять</a>
	</div>
	<script type="text/javascript">
		var map = L.map('map').setView([53.2847703,69.377373], 17);

		let myFilter = ['invert:100%','grayscale:100%','bright:101%','contrast:81%','saturate:0%']; 

		L.tileLayer.colorFilter('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
		    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
		    filter: myFilter,
		}).addTo(map);

		let circleStatus = false;
		$(".switch").click(function() {
		  if(circleStatus == false)
		  {
		  	circleStatus = true;
		  	$(".circle").css("transform", "translateX(30px)");
		  	$(".switch").css("background", "#005ff9");
		  	var audio = new Audio('media/audio/online_on.m4a');
			audio.play();
			testOrder();
		  }
		  else
		  {
		  	circleStatus = false;
		  	$(".circle").css("transform", "translateX(0px)");
		  	$(".switch").css("background", "#31353f");
		  	var audio = new Audio('media/audio/online_off.m4a');
			audio.play();
		  }
		});


		function testOrder()
		{
			setTimeout(function(){ showOrderNotification(); }, 4000);
			
		}
		function showOrderNotification()
		{
			var height = $(".order-notification").height();	
			height += 20;
			var heightString = "translateY(" + height + "px)";

			$(".order-notification").css("transform", heightString);
			$(".order-notification").css("visibility", "visible");
			setTimeout(function(){ 
				$(".order-notification").css("transform", "translateY(0px)"); 
				var audio = new Audio('media/audio/new_order.m4a');
				audio.play();
			}, 700);
		}

		function closeNotification()
		{
			var height = $(".order-notification").height();	
			height += 20;
			var heightString = "translateY(" + height + "px)";
			$(".order-notification").css("transform", heightString);
			setTimeout(function(){ $(".order-notification").css("display", "none"); }, 700);
			
		}
	</script>
</body>
</html>